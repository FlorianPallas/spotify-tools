(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{190:function(t,e,r){"use strict";r.r(e);var n=r(1).a.extend({props:{href:{type:String,default:void 0,required:!1},outbound:{type:Boolean,default:!1},secondary:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},methods:{click:function(t){this.disabled&&(t.stopPropagation(),t.preventDefault()),this.$emit("click",event)}}}),o=(r(196),r(30)),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return void 0===t.href?r("button",{staticClass:"button",class:{secondary:t.secondary,disabled:t.disabled},on:{click:t.click}},[t._t("default")],2):!0===t.outbound?r("a",{staticClass:"button",class:{secondary:t.secondary},attrs:{href:t.href}},[t._t("default")],2):r("nuxt-link",{staticClass:"button",class:{secondary:t.secondary},attrs:{to:t.href,tag:"button"}},[t._t("default")],2)}),[],!1,null,"c9460f60",null);e.default=component.exports;installComponents(component,{Button:r(190).default})},191:function(t,e,r){var content=r(195);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(52).default)("1991309a",content,!0,{sourceMap:!1})},192:function(t,e,r){var content=r(197);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(52).default)("507ea9e2",content,!0,{sourceMap:!1})},194:function(t,e,r){"use strict";r(191)},195:function(t,e,r){(e=r(51)(!1)).push([t.i,".wrapper[data-v-365e5472]{max-width:100rem;margin:10rem auto;padding:0 2rem}.playlist-grid[data-v-365e5472]{display:flex;flex-flow:row wrap;margin-bottom:5rem}.playlist[data-v-365e5472]{background:#121212;position:relative;height:20rem;width:20rem;margin:1rem;overflow:hidden;transition:box-shadow .15s;cursor:pointer}.playlist--cover[data-v-365e5472]{height:100%}.playlist--name[data-v-365e5472]{position:absolute;bottom:0;left:0;right:0;text-align:center;text-shadow:0 0 .5 rgba(0,0,0,.75)}.playlist.selected[data-v-365e5472]{box-shadow:0 0 0 .2rem #1db954}.info[data-v-365e5472]{padding:0 1rem}.info strong[data-v-365e5472]{color:#1db954}.buttons[data-v-365e5472]{margin-top:2rem}.buttons button[data-v-365e5472]{margin:0 1rem 1rem}.header[data-v-365e5472]{box-shadow:inset 0 0 0 .2rem #1db954;color:#1db954;margin:0 1rem 5rem;padding:2rem 4rem;border-radius:.5rem;text-align:center}.header .description[data-v-365e5472],.header .title[data-v-365e5472]{margin:1rem 0}",""]),t.exports=e},196:function(t,e,r){"use strict";r(192)},197:function(t,e,r){(e=r(51)(!1)).push([t.i,".button[data-v-c9460f60]{background:#1db954;color:#fff;border:none;padding:1rem 4rem;border-radius:3rem;font-size:1.2rem;line-height:100%;font-weight:700;text-align:center;text-transform:uppercase;letter-spacing:.2rem;transition:background-color .3s,color .3s;cursor:pointer;display:inline-block;text-decoration:none}.button[data-v-c9460f60]:hover{background:#22da63;color:#fff}.button.secondary[data-v-c9460f60]{background:transparent;box-shadow:inset 0 0 0 .2rem #fff}.button.secondary[data-v-c9460f60]:hover{background:#fff;color:#0f0f0f}.button.disabled[data-v-c9460f60]{background:#666;cursor:not-allowed}",""]),t.exports=e},200:function(t,e,r){"use strict";r.r(e);var n=r(1).a.extend({props:{scopes:{type:Array,default:function(){return[]}},state:{type:String,default:"/"}},methods:{logout:function(){this.$store.commit("SET_TOKEN",void 0),this.$emit("logout")}}}),o=r(30),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return void 0===t.$store.getters.accessToken?r("Button",{attrs:{outbound:"",href:t.$store.getters.oAuthUrl(t.scopes,t.state)}},[t._v("Authorize")]):r("Button",{attrs:{secondary:""},on:{click:function(e){return t.logout()}}},[t._v("Logout")])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Button:r(190).default})},201:function(t,e,r){"use strict";r.r(e);r(26),r(31),r(23),r(33),r(32),r(16),r(24),r(25),r(10);var n=r(80);var o=r(106);function c(t){return function(t){if(Array.isArray(t))return Object(n.a)(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(o.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r(54),r(53),r(39);var l=r(2);function d(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0,n=function(){};return{s:n,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw o}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var h=r(1).a.extend({data:function(){return{playlists:[],selectedSource:[],selectedTarget:void 0,isLoading:!1}},head:function(){return{title:"Playlist Merger | Spotify Tools"}},computed:{coverSrc:function(){return function(t){return t.images&&t.images.length>0?t.images[0].url:""}}},mounted:function(){this.$store.getters.accessToken&&this.getUserPlaylists()},methods:{merge:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var r,n,o,l,f,h,v,m,y,k,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.selectedSource.length<1||void 0===t.selectedTarget)){e.next=2;break}return e.abrupt("return");case 2:t.isLoading=!0,r=[],n=d(t.selectedSource),e.prev=5,n.s();case 7:if((o=n.n()).done){e.next=15;break}return l=o.value,e.next=11,t.getPlaylistTracks(l);case 11:f=e.sent,r.push.apply(r,c(f));case 13:e.next=7;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),n.e(e.t0);case 20:return e.prev=20,n.f(),e.finish(20);case 23:return h=[],v=[],r.forEach((function(track){h.includes(track.id)||(v.push(track),h.push(track.id))})),e.next=28,t.getPlaylistTracks(t.selectedTarget);case 28:if(m=e.sent,y=m.map((function(t){return t.id})),k=[],m.forEach((function(track){h.includes(track.id)||k.push(track.uri)})),x=[],v.forEach((function(track){y.includes(track.id)||x.push(track.uri)})),confirm("Are you sure you want to merge the selected playlists into the target playlists?\n\n".concat(x.length," tracks will be added, ").concat(k.length," tracks will be removed!"))){e.next=38;break}return t.isLoading=!1,e.abrupt("return");case 38:if(e.prev=38,!(k.length>0)){e.next=42;break}return e.next=42,t.removePlaylistTracks(t.selectedTarget,k);case 42:if(!(x.length>0)){e.next=45;break}return e.next=45,t.addPlaylistTracks(t.selectedTarget,x);case 45:e.next=53;break;case 47:return e.prev=47,e.t1=e.catch(38),console.log(e.t1),alert("An Error occured!\nThe target playlist may be incomplete."),t.isLoading=!1,e.abrupt("return");case 53:alert("Playlists merged successfully!"),t.selectedSource=[],t.selectedTarget=void 0,t.isLoading=!1;case 57:case"end":return e.stop()}}),e,null,[[5,17,20,23],[38,47]])})))()},toggle:function(t,e){if("source"===t){var r=this.selectedSource.indexOf(e);r>-1?this.selectedSource.splice(r,1):this.selectedSource.push(e)}"target"===t&&(this.selectedTarget===e?this.selectedTarget=void 0:this.selectedTarget=e)},getUserPlaylists:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.$get("https://api.spotify.com/v1/me/playlists",{headers:{Authorization:"Bearer ".concat(t.$store.getters.accessToken)}});case 2:r=e.sent,n=r.items,t.playlists=n;case 5:case"end":return e.stop()}}),e)})))()},getPlaylistTracks:function(t){var e=arguments,r=this;return Object(l.a)(regeneratorRuntime.mark((function n(){var o,l,d,f,h,v;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.length>1&&void 0!==e[1]?e[1]:0,l=e.length>2&&void 0!==e[2]?e[2]:0,n.next=4,r.$axios.$get("https://api.spotify.com/v1/playlists/".concat(t,"/tracks?offset=").concat(o),{headers:{Authorization:"Bearer ".concat(r.$store.getters.accessToken)}});case 4:if(d=n.sent,f=d.items.map((function(i){return i.track})),!((l+=f.length)<d.total)){n.next=13;break}return h=o+f.length,n.next=11,r.getPlaylistTracks(t,h,l);case 11:v=n.sent,f.push.apply(f,c(v));case 13:return n.abrupt("return",f);case 14:case"end":return n.stop()}}),n)})))()},removePlaylistTracks:function(t,e){var r=this;return Object(l.a)(regeneratorRuntime.mark((function n(){var i,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e.length>100)){n.next=10;break}i=0;case 2:if(!(i<e.length)){n.next=9;break}return o=e.slice(i,i+100),n.next=6,r.removePlaylistTracks(t,o);case 6:i+=100,n.next=2;break;case 9:return n.abrupt("return");case 10:return n.next=12,r.$axios.$delete("https://api.spotify.com/v1/playlists/".concat(t,"/tracks"),{data:{tracks:e.map((function(t){return{uri:t}}))},headers:{Authorization:"Bearer ".concat(r.$store.getters.accessToken)}});case 12:case"end":return n.stop()}}),n)})))()},addPlaylistTracks:function(t,e){var r=this;return Object(l.a)(regeneratorRuntime.mark((function n(){var i,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e.length>100)){n.next=10;break}i=0;case 2:if(!(i<e.length)){n.next=9;break}return o=e.slice(i,i+100),n.next=6,r.addPlaylistTracks(t,o);case 6:i+=100,n.next=2;break;case 9:return n.abrupt("return");case 10:return n.next=12,r.$axios.$post("https://api.spotify.com/v1/playlists/".concat(t,"/tracks"),{uris:e},{headers:{Authorization:"Bearer ".concat(r.$store.getters.accessToken)}});case 12:case"end":return n.stop()}}),n)})))()}}}),v=(r(194),r(30)),component=Object(v.a)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"wrapper"},[r("header",{staticClass:"header"},[r("h1",{staticClass:"title"},[t._v("PLAYLIST MERGER")]),t._v(" "),r("p",{staticClass:"description"},[t._v("Easily merge multiple playlists into one!")]),t._v(" "),r("div",{staticClass:"buttons"},[r("ButtonAuthorize",{attrs:{scopes:["playlist-modify-public","playlist-modify-private","playlist-read-private","playlist-read-collaborative"],state:"/merge"},on:{logout:function(e){t.playlists=[]}}}),t._v(" "),r("Button",{attrs:{secondary:"",href:"/"}},[t._v("Overview")])],1)]),t._v(" "),t._m(0),t._v(" "),r("div",{staticClass:"playlist-grid"},t._l(t.playlists,(function(e,n){return r("div",{key:n,staticClass:"playlist",class:{selected:t.selectedSource.includes(e.id)},on:{click:function(r){return t.toggle("source",e.id)}}},[r("img",{staticClass:"playlist--cover",attrs:{src:t.coverSrc(e)}}),t._v(" "),r("p",{staticClass:"playlist--name"},[t._v(t._s(e.name))])])})),0),t._v(" "),t._m(1),t._v(" "),r("div",{staticClass:"playlist-grid"},t._l(t.playlists,(function(e,n){return r("div",{key:n,staticClass:"playlist",class:{selected:t.selectedTarget===e.id},on:{click:function(r){return t.toggle("target",e.id)}}},[r("img",{staticClass:"playlist--cover",attrs:{src:t.coverSrc(e)}}),t._v(" "),r("p",{staticClass:"playlist--name"},[t._v(t._s(e.name))])])})),0),t._v(" "),r("div",{staticClass:"buttons"},[r("Button",{attrs:{disabled:void 0===t.$store.getters.accessToken||t.selectedSource.length<1||void 0===t.selectedTarget||t.isLoading},on:{click:function(e){return t.merge()}}},[t._v(t._s(t.isLoading?"Merging ...":"Confirm & Merge"))]),t._v(" "),r("Button",{attrs:{secondary:"",href:"/"}},[t._v("Overview")])],1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"info"},[e("h2",[this._v("Source Playlists")]),this._v(" "),e("p",[this._v("\n      Select one or more playlists. The tracks from these playlists will be\n      merged and put into the target playlist. The tracks of the source\n      playlists will not be altered.\n    ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"info"},[e("h2",[this._v("Target Playlist")]),this._v(" "),e("strong",[this._v("The tracks in this playlist will be overridden!")]),this._v(" "),e("p",[this._v("\n      Select one playlist. This playlist will later contain all tracks of the\n      selected source playlists. If you are unsure, create and choose an empty\n      playlist instead.\n    ")])])}],!1,null,"365e5472",null);e.default=component.exports;installComponents(component,{ButtonAuthorize:r(200).default,Button:r(190).default})}}]);